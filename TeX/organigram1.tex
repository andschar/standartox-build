\documentclass[border = 1.5cm]{standalone}
%\documentclass[border = 1.5cm, convert={density=300,size=1080x800,outext=.png}]{standalone} % doesn't work
%%%% packages
\usepackage{tikz}
\usetikzlibrary{trees, arrows, shapes.geometric, positioning} % TikZ libraries
%%%% layers
\pgfdeclarelayer{bg1}    % declare background layer
\pgfdeclarelayer{bg2}
\pgfdeclarelayer{bg3}
\pgfsetlayers{bg3,bg2,bg1,main}  % set the order of the layers (main is the standard layer)

%%%% styles
\tikzset{
	every rectangle node/.style = {thick, anchor=west},
	every picture/.style = {/utils/exec={\sffamily}},
	font = {\fontsize{13pt}{12}\selectfont},
	io/.style = {rectangle, minimum width = 4cm, minimum height = 3cm, text centered, draw = black, fill = blue!10},
	main/.style = {rectangle, draw = black, rounded corners, minimum width = 3cm, minimum height = 1.25cm, text centered},
	ids/.style = {diamond, minimum width = 3cm, minimum height = 2cm, text centered, draw = black, fill = green!30},
	res/.style = {rectangle, rounded corners, minimum width = 2cm, minimum height = 1cm, text centered, draw = black, fill = blue!30},
	resvariables/.style = {rectangle, minimum width = 2cm, minimum height = 1cm, text centered},
	steps/.style = {rectangle, minimum width = 1cm, text centered, fill = yellow},
	arrow/.style = {->, > = stealth, draw = black, color = gray!80, line width = 2.5pt}
}

\begin{document}
	\begin{tikzpicture}[
	grow via three points={one child at (0.5,-1) and
		two children at (0.5,-1) and (0.5,-1.7)},
	edge from parent path={(\tikzparentnode.south) |- (\tikzchildnode.west)},
	inner sep = 0pt, outer sep = 0pt
	]
	
		\node (io) [io, align = center] at (0cm,0cm) {.csv or .xlsx \\ CAS \\ Compound name};
		%% chemicals
		% id nodes


		\node (cas) [ids, below of=io, yshift = -4cm] {CAS};


		% main nodes
		\node (chemprop) [main, dashed, right of=cas, xshift=4.5cm, yshift=3cm] {CHEMPROP};
		\node (epa) [main, ultra thick, right of=cas, yshift=1cm, xshift=4.5cm] {EPA ECOTOX}
			child { node { qu\_epa.R} };
		\node (chemscr) [main, right of=cas, yshift=-1cm, xshift=4.5cm] {PHYS-CHEM}
			child { node { Alan Wood Pesticide Compendium - \textbf{qu\_aw.R } }}
			child { node { Pesticide Action Network - \textbf{ch\_pan.R} }}
			child { node { PhysProp - \textbf{ch\_pp.R} }}
			child { node { PubChem - \textbf{qu\_pubchem.R} }};
		
		%% organisms
		% id nodes
		\node (taxon) [ids, below of=cas, yshift=-9cm, align = center] {Taxon}; % \\ {(Genus or Species)}}; % escape brackets usin curly brackets
		% main nodes
		\node (taxonquery) [main, right of=taxon, xshift = 4.5cm, yshift = 3cm] {Taxonomy};
		\node (habitat) [main, right of=taxon, xshift = 4.5cm, yshift = 1cm] {Habitats}
			child { node { WORMS data base - \textbf{tx\_worms.R} }}
			child { node { Manual Search - \textbf{ha\_manual.R} }};
		\node (region) [main, right of = taxon, xshift = 4.5cm, yshift = -2cm] {Continents}
			child { node { GBIF - \textbf{qu\_gbif.R} }};
		
		%% final result
		\begin{pgfonlayer}{bg3}
			\node[rectangle, draw, rounded corners, minimum height = 2cm, minimum width = 7cm, fill = gray!10] (appbox) at (20.5cm,-10cm) {};
		\end{pgfonlayer}
		\node (apptext) [above of = appbox, yshift = 0.25cm, xshift = -3cm] {Etox-Base App}; 
		\node (testres) [res, right of = cas, xshift = 14cm, yshift = -5cm] {Result};
		\node (filtres) [res, right of = testres, xshift = 2cm] {Filter};
		\node (aggres) [res, right of = filtres, xshift = 2cm] {Aggregate};



		%%% arrows %%%
		\begin{pgfonlayer}{bg1}
		\draw [arrow, black] (io) -- (cas);
		\draw [arrow, dashed] (cas.east) -- (chemprop.west);
		\draw [arrow] (cas.east) -- (chemscr.west);
		\draw [arrow] (cas.east) -- (epa.west);
		
		\draw [arrow] (epa.east) -| (testres.north);
		\draw [arrow] (chemscr.east) -| (testres.north);
		
		%\begin{scope}[on background layer]
		\begin{pgfonlayer}{bg2}
			\draw [arrow, black] (epa) .. controls (3cm,-8cm) .. (taxon.north);
		\end{pgfonlayer}
		%\end{scope}
		
		\draw [arrow] (taxon.east) -- (habitat.west);
		\draw [arrow] (taxon.east) -- (region.west);
		\draw [arrow] (taxon.east) -- (taxonquery.west);
		\draw [arrow] (taxonquery.east) -| (testres.south);
		\draw [arrow] (habitat.east) -| (testres.south);
		\draw [arrow] (region.east) -| (testres.south);

		
		\draw [arrow] (testres) -- (filtres); %++(2cm,0cm);
		\draw [arrow] (filtres) -- (aggres); 
	
		\end{pgfonlayer}
	\end{tikzpicture}
\end{document}