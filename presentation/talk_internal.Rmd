---
title: "[Decluttering ecotoxicological test data](https://cfpub.epa.gov/ecotox/)"
subtitle: "how to obtain valuable information from the EPA ECOTOX data base"
author: "Andreas Scharmüller"
date: "2018/08/23"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
editor_options: 
  chunk_output_type: console
---

```{r setup, echo=FALSE, include=FALSE}
source('/home/andreas/Documents/Projects/etox-base/R/setup.R')
require(knitr)
```


# The EPA ECOTOX data base

<https://cfpub.epa.gov/ecotox/>

<img src="/home/andreas/Documents/Projects/etox-base/presentation/data/epa_screenshot.png" width="600px">

---
# The EPA ECOTOX data base

<img src="/home/andreas/Documents/Projects/etox-base/presentation/data/epa_screenshot.png" width="300px" style="position:absolute; left:85px; top:230px">

<img src="https://cdn.pixabay.com/photo/2012/04/24/11/42/arrow-39526_960_720.png" width="200px" style="position:absolute; left:410px; top:280px">

<img src="https://zdnet4.cbsistatic.com/hub/i/r/2018/04/19/092cbf81-acac-4f3a-91a1-5a26abc1721f/resize/370xauto/ce84e38cb1c1a7c5a2c9e4c337e108ba/postgresql-logo.png" width="250px" style="position:absolute; left:610px; top:255px">

---
# The EPA ECOTOX data base

<img src="/home/andreas/Documents/Projects/etox-base/presentation/data/epa_screenshot.png" width="300px" style="position:absolute; right:40px">

information on ecotoxicological tests

__filters in online version:__

* endpoints (e.g. NOEC, LOEC, __EC50__, ECXX )

* chemicals (CAS, compound name)

* organism (upper-level groups)


__not possible:__

* duration

* distinguish between pesticide groups (e.g. fungicides, herbicides, ...)

* filter organism groups

* refine to specific regions where tested organisms occur

* attribute organism to habitats (e.g. marine, brackish, freshwater, ...)


---
# The EPA ECOTOX data base

<img src="/home/andreas/Documents/Projects/etox-base/presentation/data/epa_screenshot.png" width="300px" style="position:absolute; right:40px">

information on ecotoxicological tests

__filters in online version:__

* endpoints (e.g. NOEC, LOEC, __EC50__, ECXX )

* chemicals (CAS, compound name)

* organism (upper-level groups)

<img src="/home/andreas/Documents/Projects/etox-base/data/pubchemlogo2017.png" width="150px" style="position:absolute; top:430px;">

<img src="http://www.panna.org/sites/all/themes/velocity/new-panlogo.png" width="150px" style="position:absolute; top:470px; left:200px;">

<img src="https://www.itis.gov/Static/images/maintoplogo.gif" width="75px" style="position:absolute; top:510px; left:75px;">


<img src="http://3.bp.blogspot.com/-Wpp0vCJQDHo/U_ZMorXEynI/AAAAAAAAA7Y/Y-f-3brn99k/s1600/GBIF_logo_short_form.gif" width="150px" style="position:absolute; top:520px; right:20px;">

<img src="https://www.easterncapescubadiving.co.za/downloads/Worms.jpg" width="250px" style="position:absolute; top:470px; right:200px;">

---
# The data

```{r test-plot, echo=FALSE, fig.width=9}
gg_test = readRDS(file.path(plotdir, 'gg_test.rds'))
gg_test
```

---
# Aims

* to separate the wheat from the chaff

* EC50 values

* improve filters

* to aggreagte many test results

* usable and accessible

* establish effect relationships between compounds and organisms (not only: _D. magna_, _P. subcapitata_, _P. promelas_)

---
class: right

# Workflow

```{r organigram-conversion, echo=FALSE, include=TRUE, out.width="100%"}
pdf_file = '/home/andreas/Documents/Projects/etox-base/TeX/organigram1.pdf'
png_file = '/home/andreas/Documents/Projects/etox-base/TeX/organigram1.png'

system(sprintf('convert -density 300 %s %s', pdf_file, png_file))
```

<img src="/home/andreas/Documents/Projects/etox-base/TeX/organigram1.png" width="1000px" style="position:absolute; top:10px; left:10px">

--

<img src="https://zdnet4.cbsistatic.com/hub/i/r/2018/04/19/092cbf81-acac-4f3a-91a1-5a26abc1721f/resize/370xauto/ce84e38cb1c1a7c5a2c9e4c337e108ba/postgresql-logo.png" width="150px" style="position:absolute; right:75px; top:210px">

<img src="https://www.rstudio.com/wp-content/uploads/2014/04/shiny.png" width="100px" style="position:absolute; right:105px; bottom:95px">

---
# Filter

* EC50

* CAS

* different organism groups (e.g. Algae, Macro-Invertebrates, Chironomidae, ... )

* test duration

* habitat

* regions

* concentration type (Active ingredient, Formulation)

<img src="/home/andreas/Documents/Projects/etox-base/TeX/organigram1_app.png" width="380px" style="position:absolute; right:0px; top:10px;">

---
# Aggregation

* (1) by CAS, test organism and test duration 
  
  * __if:__ N<sub>tests</sub> > 2 __then:__ median
  * __else:__ minimum

* (2) by CAS
  
  * mean, median, min, max (can be chosen)


<img src="/home/andreas/Documents/Projects/etox-base/TeX/organigram1_app.png" width="380px" style="position:absolute; right:0px; top:10px">


---
class: middle

[the app](future/link/to/host)

<img src="/home/andreas/Documents/Projects/etox-base/presentation/data/etox_base_screenshot.png" width="600px" style="position:absolute; left:200px; top:150px">


---
class: right, middle

# [Thank you for your attention!](https://www.researchgate.net/profile/Andreas_Scharmueller)
Andreas Scharmüller<br/>

Quantitative Landscape Ecology<br/>
University Koblenz-Landau

<img src="https://upload.wikimedia.org/wikipedia/de/thumb/9/9f/Twitter_bird_logo_2012.svg/1259px-Twitter_bird_logo_2012.svg.png" width="20"> @andschar <br/>
<img src="https://seeklogo.com/images/M/mail-icon-logo-28FE0635D0-seeklogo.com.png" width="20"> scharmueller@uni-landau.de

<img src="https://www.uni-koblenz-landau.de/de/landau/fb7/umweltwissenschaften/logos/land-ecol-neu.jpg" width="100">
<img src="https://www.uni-koblenz-landau.de/de/uni/organisation/verwaltung/abteilungen/abt-1/dokumente-ab1/uni-logo-farbig.jpg" width="200">