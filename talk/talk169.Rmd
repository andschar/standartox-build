---
title: "[Standartox](http://standartox.uni-landau.de)"
subtitle: "A tool for assessing the risk of chemicals"
author: "Andreas Scharmüller<br/>Verena C. Schreiner<br/>Ralf B. Schäfer<br/>"
institute: "Quantitative Landscape Ecology<br/>iES Landau, Institute for Environmental Sciences<br/>"
date: "1.7.2019 (updated: `r format(Sys.Date(), '%d.%m.%Y')`)"
output:
  xaringan::moon_reader:
    css: [metropolis, metropolis-fonts, default]
    #css: ['css/tweeks.css', metropolis, metropolis-fonts, default]
    #css: ['css/metropolis_as.css', 'css/metropolis-fonts_as.css', 'css/default.css']
    lib_dir: libs
    #classoption: "aspectratio=169"
    nature:
      ratio: '16:9'
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
    seal: false # omits title slide
editor_options: 
  chunk_output_type: console
---

```{r setup, echo=FALSE, include=FALSE, warning=FALSE, message=FALSE}
src = '/home/scharmueller/Projects/etox-base/R'
source(file.path(src, 'gn_setup.R'))
```


class: title-slide

# [Standartox](http://standartox.uni-landau.de)
## A tool for assessing the risk of chemicals

### Andreas Scharmüller<br>
### Verena C. Schreiner<br>
### Ralf B. Schäfer
<br><br>
### Quantitative Landscape Ecology<br/>
### iES Landau, Institute for Environmental Sciences<br>
### University Koblenz-Landau
<br>
<img src="https://www.uni-koblenz-landau.de/de/landau/fb7/umweltwissenschaften/logos/land-ecol-neu.jpg" width="100">
<img src="https://www.uni-koblenz-landau.de/de/uni/organisation/verwaltung/abteilungen/abt-1/dokumente-ab1/uni-logo-farbig.jpg" width="200">

---
# Chemicals in the environment

.pull-left[
- Increase in world-wide production of chemicals

- Increase in chemical diversity

- Arrive in freshwater systems
  - Pharmaceuticals
  - Pesticides
  - Personal care products
  - ...
]

.pull-right[

Bernhardt et al. 2017
<img src="/home/scharmueller/Projects/etox-base/talk/data/bernhardt_et_al2.png" width="600px">

]

???
light-red: diversity of US pharmaceuticals<br>
red: application of pesticides (globally and in the US)

---
background-image: url(/home/scharmueller/Projects/etox-base/talk/data/stream.jpg)
background-size: 450px
background-position: 90% 50%

# Assessing the risk of chemicals

- Regulatory thresholds

- SPEAR

- Species Sensitivity Distributions

- Toxic Units (TUs)

  - $TU = \log10(\frac{concentration}{EC_{50}})$

--
<br><br><br><br>
## Toxicity Data?
  
???
Presenter notes can be put here!

---
# US EPA ECOTOX data base

<https://cfpub.epa.gov/ecotox/>
<br/>

--
<img src="/home/scharmueller/Projects/etox-base/talk/data/epa_ecotox_screenshot.png" width="1000px">

---
# US EPA ECOTOX data base

<https://cfpub.epa.gov/ecotox/>
<br/>


.pull-left[

<img src="/home/scharmueller/Projects/etox-base/talk/data/epa_ecotox_screenshot.png" width="500px">

]

.pull-right[
- Toxicity tests data base

  - ~12,000 chemicals
  
  - ~12,000 taxa
  
  - ~1,000,000 results
  
  - Released quarterly
  
  - Open for download
]

---
# US EPA ECOTOX ➡️ Standartox

<img src="/home/scharmueller/Projects/etox-base/talk/data/organigram2.png" width="1100px" style="position:absolute; left:10px; top:80px;">


---
# Standartox

<http://standartox.uni-landau.de/>
<br/>

--
<img src="/home/scharmueller/Projects/etox-base/talk/data/standartox_screenshot.png" width="1000px">

---
# Standartox

<http://standartox.uni-landau.de/>
<br/>

.pull-left[
<img src="/home/scharmueller/Projects/etox-base/talk/data/standartox_screenshot.png" width="500px">
### Aim: Prepare ecotoxicological test data in a __reproducible__ and __standardized__ way
]

---
# Standartox

<http://standartox.uni-landau.de/>
<br/>

.pull-left[
<img src="/home/scharmueller/Projects/etox-base/talk/data/standartox_screenshot.png" width="500px">
### Aim: Prepare ecotoxicological test data in a __reproducible__ and __standardized__ way
]

.pull-right[
- Web tool / data base

  - Prepares ecotoxicological test data + additional data
  
  - Cleaning & Harmonisation (e.g. units)
  
  - __Filters__ test results
  
  - __Aggregates__ test results
  
  - Facilitates data retrieval
  
  - GUI & R-package (in preparation)

  - Manuscript (in preparation)
]

---
# Filter

.pull-left[
- Test parameters

  - Duration (e.g. 48h, 96h)
  - Endpoint (e.g. EC50, NOEC)
  - Effect groups (e.g. Mortality, Growth)
]




---
# Filter

.pull-left[
- Test parameters
  - Duration (e.g. 48h, 96h)
  - Endpoint (e.g. EC50, NOEC)
  - Effect groups (e.g. Mortality, Growth)
  
- Chemical parameters
  - Chemicals
  - Chemical classes (e.g. Herbicide, Fungicide)
]

.pull-right[
```{r echo=FALSE, message=FALSE, warning=FALSE}
gg_chem_class = readRDS(file.path(datadir_tk, 'gg_chem_class.rds'))
gg_chem_class
```
]

---
# Filter

.pull-left[
- Test parameters
  - Duration (e.g. 48h, 96h)
  - Endpoint (e.g. EC50, NOEC)
  - Effect groups (e.g. Mortality, Growth)
  
- Chemical parameters
  - Chemicals
  - Chemical classes (e.g. Herbicide, Fungicide)

- Organism parameters
  - Habitat
]

.pull-right[
```{r echo=FALSE, message=FALSE, warning=FALSE}
gg_habi_class = readRDS(file.path(datadir_tk, 'gg_habi_class.rds'))
gg_habi_class
```
]

---
# Filter

.pull-left[
- Test parameters
  - Duration (e.g. 48h, 96h)
  - Endpoint (e.g. EC50, NOEC)
  - Effect groups (e.g. Mortality, Growth)
  
- Chemical parameters
  - Chemicals
  - Chemical classes (e.g. Herbicide, Fungicide)

- Organism parameters
  - Habitat
  - Occurrence
]

.pull-right[
```{r echo=FALSE, message=FALSE, warning=FALSE}
gg_regi_class = readRDS(file.path(datadir_tk, 'gg_regi_class.rds'))
gg_regi_class
```
]

---
# Aggregate

- __Geometric mean__
- Median
- Minimum
- Maximum

---
# Example: Trichlorofon

.pull-left[
- Filters

  - Chemical: 52-68-6 (Trichlorofon)  
  - Taxon: _Oncorhynchus mykiss_
  - Duration: 48 to 96h
  - Endpoint: EC50

- Aggregate

  - Geometric mean
]

--

.pull-right[
```{r fig.width=9, fig.height=7, echo=FALSE, warning=FALSE, message=FALSE}
gg_trichlorofon = readRDS(file.path(datadir_tk, 'gg_oncor_mykiss_trichlorofon_standartox_ppdb_comparison.rds'))
gg_trichlorofon
```
]

--
.pull-right[
__Result: Single EC50 value for a specific test setting__
]

---
# Example: All chemicals

```{r fig.width=12, fig.height=7, echo=FALSE, warning=FALSE, message=FALSE}
gg_comparison = readRDS(file.path(datadir_tk, 'gg_oncor_mykiss_standartox_output.rds'))
gg_comparison
```

---
# Example: Comparison

```{r fig.width=12, fig.height=7, echo=FALSE, warning=FALSE, message=FALSE}
gg_comparison = readRDS(file.path(datadir_tk, 'gg_oncor_mykiss_standartox_ppdb_comparison.rds'))
gg_comparison
```

<img src="https://sitem.herts.ac.uk/aeru/ppdb/en/new_logo_small.jpg" width="300px" style="position:absolute; top:120px; right:150px;">

--
__92% of Standartox values diverge by less than a factor of 10 from PPDB values__


---
# Conclusions

.pull-left[

`r emo::ji('heavy_minus_sign')`

- Poorly conducted studies included
  - Average them out
]

.pull-right[

`r emo::ji('heavy_plus_sign')`

- Cleaned & easily-accessible ecotoxicological data base
- Constantly updated
- Version control
- Standardized & reproducible aggregations
- Not restricted to specific chemical classes
  - PPDB: pesticides
]

---
# Outlook: R-package

- standartox::
  - Application Programming Interface (API)
  - scriptable
  - __reproducible__

```{r eval=FALSE}
require(standartox)

standartox(cas = '52-68-6',
           endpoint = 'EC50',
           effect = 'MOR',
           duration = c(48, 96),
           taxon = 'Oncorhynchus',
           filtered = TRUE,
           aggregated = TRUE)
```

---
# Appeal

__Ecotoxicology and Ecology need to embrace the computer age and data sources must become machine-readable!__

- Open Source --> Open Data

- Application Programming Interface (API)

- Big challenges...
  - 12,000 chemicals
  - 12,000 taxa 
  - 1,000,000 test results

- ...demand big, scalable solutions


<img src="http://3.bp.blogspot.com/-Wpp0vCJQDHo/U_ZMorXEynI/AAAAAAAAA7Y/Y-f-3brn99k/s1600/GBIF_logo_short_form.gif" width="120px" style="position:absolute; top:200px; right:70px;">

<img src="/home/scharmueller/Projects/etox-base/talk/data/logos/worms.png" width="250px" style="position:absolute; top:300px; right:260px;">

<img src="/home/scharmueller/Projects/etox-base/talk/data/logos/chebi.png" width="250px" style="position:absolute; top:450px; right:150px;">

<img src="/home/scharmueller/Projects/etox-base/talk/data/logos/pubchem.png" width="250px" style="position:absolute; top:570px; right:200px;"> 

---
layout: false
# [Thank you for your attention!](https://www.researchgate.net/profile/Andreas_Scharmueller)

## Standartox
### A tool for assessing the risk of chemicals

Andreas Scharmüller<br>
Verena C. Schreiner<br>
Ralf B. Schäfer

Quantitative Landscape Ecology<br/>
iES Landau, Institute for Environmental Sciences<br>
University Koblenz-Landau

<img src="https://upload.wikimedia.org/wikipedia/de/thumb/9/9f/Twitter_bird_logo_2012.svg/1259px-Twitter_bird_logo_2012.svg.png" width="20"> @andschar <br/>
<img src="https://seeklogo.com/images/M/mail-icon-logo-28FE0635D0-seeklogo.com.png" width="20"> scharmueller@uni-landau.de

<img src="https://www.uni-koblenz-landau.de/de/landau/fb7/umweltwissenschaften/logos/land-ecol-neu.jpg" width="100">
<img src="https://www.uni-koblenz-landau.de/de/uni/organisation/verwaltung/abteilungen/abt-1/dokumente-ab1/uni-logo-farbig.jpg" width="200">












